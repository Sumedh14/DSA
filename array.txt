const data = [0.00, 3.21, 6.93, 10.59, 14.26, 17.92, 21.44, 25.04, 28.57, 32.17, 35.70, 39.23, 42.65, 46.11, 49.58, 53.05, 56.52, 59.92, 63.33, 66.80, 70.26, 73.74, 77.14, 80.55, 84.02, 87.49, 90.90, 94.36, 97.77, 101.24, 104.71, 108.11, 111.52, 114.99, 118.40, 121.87, 125.27, 128.68, 132.08, 135.49, 138.96, 142.37, 145.78, 149.18, 152.58, 155.99, 158.83, 159.40, 162.75, 166.15, 169.56, 172.96, 176.37, 179.78, 183.18, 186.53, 189.93, 193.33, 196.75, 200.08, 203.43, 206.83, 210.24, 213.65, 216.99, 220.40, 223.74, 227.09, 230.49, 233.90, 237.24, 240.64, 243.99, 247.33, 250.68, 254.08, 257.43, 260.77, 264.11, 267.52, 270.86, 274.21, 277.55, 280.89, 284.23, 287.58, 290.98, 291.50, 294.27, 297.67, 300.96, 304.36, 307.70, 311.11, 314.38, 317.73, 321.07, 324.42, 327.76, 331.17, 334.51, 337.79, 341.19, 344.48, 347.82, 351.16, 354.51, 357.85, 358.42, 361.26, 364.53, 367.82, 371.16, 374.50, 377.84, 381.13, 383.97, 387.24, 390.59, 394.43, 397.78, 400.55, 403.84, 407.18, 410.46, 413.80, 417.08, 420.42, 423.77, 427.11, 430.39, 433.67, 437.01, 440.36, 443.71, 447.04, 450.33, 453.60, 456.95, 460.23, 463.58, 466.85, 470.20, 473.47, 476.75, 480.10, 483.45, 486.72, 490.00, 493.28, 496.62, 499.90, 500.48]


function inFusion(T, r, P, S, data) {

    let m = ((T - P) + 1) / S;
    let Q = [];
    let e = [];
    let Ei = [];
    let Emax = 0;

    for (let i = 0; i < data.length; i++) {
        let q = ((60 * (data[i] - data[i - 1])) / (S * 0.998));
        Q.push(q);
    }

    for (let i = 0; i < Q.length; i++) {
        let val = (100 * (Q[i] - r)) / r;
        if (val) {
            e.push(val);
        }
    }

    let val = 0
    for (let i = 0; i < e.length; i++) {
        for (let j = i; i < e.length; j++) {
            val += e[j];
        }
        Ei.push((val / (P / S)))
    }

    Emax = Math.max(Ei);
    return Emax;
}

const T = 3600;
const r = 200;
const P = 2;
const S = 1;

let val = inFusion(T, r, P, S, data);

console.log("val", val);
